"math test"
<~~ c.compile(c.asg, upstream) ~~>

{

formula     = expression <~~ print("\\n\\nRESULT: " + upstream.str + "\\n\\n") ~~> ;





expression  <~~ upstream.str = ltrPlus ~~>                        =
    term                <~~ var ltrPlus = upstream.str ~~>
    {
        ( "+" | "-" )   <~~ var plusOp = upstream.str ~~>
        term            <~~ ltrPlus = (plusOp=="+") ? parseInt(ltrPlus) + parseInt(upstream.str) : parseInt(ltrPlus) - parseInt(upstream.str) ~~>
    }                   
    ;



term        <~~ upstream.str = ltrMul ~~>                         =
    factor              <~~ var ltrMul = upstream.str ~~>
    {
        ( "*" | "/" )   <~~ upstream.mulOp = upstream.str ~~>
        factor          <~~ ltrMul = (upstream.mulOp=="*") ? parseInt(ltrMul) * parseInt(upstream.str) : parseInt(ltrMul) / parseInt(upstream.str) ~~>
    }                   
    ;

factor =
    (
        "("             
        expression      <~~ var expr = upstream.str ~~>
        ")"             
    )                   <~~ upstream.str = expr ~~>
    |
    number
    ;

number      = "0" | nonzero { "0" | nonzero } ;
nonzero     = "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" ;








}


formula
