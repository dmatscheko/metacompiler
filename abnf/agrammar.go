package abnf

import "14.gy/mec/abnf/r"

// ----------------------------------------------------------------------------
// Parser agrammar

var AbnfAgrammar = &r.Rules{&r.Rule{Operator: r.Command, String: "title", CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "ABNF of ABNF to a-grammar"}}}, &r.Rule{Operator: r.Command, String: "description", CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "This ABNF contains the grammatic and semantic information for annotated EBNF.\nIt allows to automatically create a compiler for everything described in ABNF (yes, that format)."}}}, &r.Rule{Operator: r.Command, String: "startRule", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "ABNF", Int: 4}}}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}, &r.Rule{Operator: r.Production, String: "ABNF", Childs: &r.Rules{&r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Production", Int: 5}, &r.Rule{Operator: r.Identifier, String: "LineCommand", Int: 21}, &r.Rule{Operator: r.Identifier, String: "Comment", Int: 17}}}}}}}, &r.Rule{Operator: r.Production, String: "Production", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(pop()) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}}}, &r.Rule{Operator: r.Optional, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " ltr.prodTag=pop() "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Tag", Int: 18}}}}}, &r.Rule{Operator: r.Token, String: "="}, &r.Rule{Operator: r.Optional, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(buildProduction(popg(), ltr.prodTag, pop())); ltr.prodTag=undefined "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Expression", Int: 6}}}}}, &r.Rule{Operator: r.Token, String: ";"}}}, &r.Rule{Operator: r.Production, String: "Expression", Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Alternative", Int: 7}}}, &r.Rule{Operator: r.Production, String: "Alternative", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(simplify(abnf.newAlternative(popg(), c.Pos))) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg([pop()]) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Sequence", Int: 8}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "|"}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(append(popg(), pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Sequence", Int: 8}}}}}}}}}, &r.Rule{Operator: r.Production, String: "Sequence", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(simplify(abnf.newSequence(popg(), c.Pos))) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg([pop()]) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Term", Int: 9}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(append(popg(), pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Term", Int: 9}}}}}}}}}, &r.Rule{Operator: r.Production, String: "Term", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "TaggedTerm", Int: 10}, &r.Rule{Operator: r.Identifier, String: "Command", Int: 22}}}}}, &r.Rule{Operator: r.Production, String: "TaggedTerm", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(popg()) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(simplify(pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "ByteRange", Int: 12}, &r.Rule{Operator: r.Identifier, String: "Range", Int: 11}, &r.Rule{Operator: r.Identifier, String: "Group", Int: 13}, &r.Rule{Operator: r.Identifier, String: "Option", Int: 14}, &r.Rule{Operator: r.Identifier, String: "Repetition", Int: 15}, &r.Rule{Operator: r.Identifier, String: "Times", Int: 16}}}}}, &r.Rule{Operator: r.Optional, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " var tag=pop(); tag.Childs=simplifyToArr(popg()); pushg(tag) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Tag", Int: 18}}}}}}}}}, &r.Rule{Operator: r.Production, String: "Range", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(popg()) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(pop()) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Token", Int: 25}}}, &r.Rule{Operator: r.Optional, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "..."}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(abnf.newRange([popg(), pop()], abnf.rangeType.Rune, c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Token", Int: 25}}}}}}}}}, &r.Rule{Operator: r.Production, String: "ByteRange", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(pop()) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Token", Int: 25}}}, &r.Rule{Operator: r.Token, String: "..b"}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newRange([popg(), pop()], abnf.rangeType.Byte, c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Token", Int: 25}}}}}, &r.Rule{Operator: r.Production, String: "Group", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "("}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newGroup(simplifyToArr(pop()), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Expression", Int: 6}}}, &r.Rule{Operator: r.Token, String: ")"}}}, &r.Rule{Operator: r.Production, String: "Option", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "["}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newOption(simplifyToArr(pop()), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Expression", Int: 6}}}, &r.Rule{Operator: r.Token, String: "]"}}}, &r.Rule{Operator: r.Production, String: "Repetition", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "{"}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newRepetition(simplifyToArr(pop()), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Expression", Int: 6}}}, &r.Rule{Operator: r.Token, String: "}"}}}, &r.Rule{Operator: r.Production, String: "Times", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg([pop()]) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "CmdNumber", Int: 19}}}, &r.Rule{Operator: r.Optional, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "..."}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(append(popg(), pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "CmdNumber", Int: 19}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newToken(\"...\")) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ""}}}}}}}}}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newTimes(popg(), simplifyToArr(pop()), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Group", Int: 13}}}}}, &r.Rule{Operator: r.Production, String: "Comment", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "#"}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Nothing", Int: 35}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "AsciiNoLb", Int: 32}}}, &r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "\n"}, &r.Rule{Operator: r.Token, String: "\r"}}}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}}}, &r.Rule{Operator: r.Production, String: "Tag", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newTag(popg(), undefined, c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "<"}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg([pop()]) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "Token", Int: 25}}}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ","}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(append(popg(), pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "Token", Int: 25}}}}}}}, &r.Rule{Operator: r.Token, String: ">"}}}}}, &r.Rule{Operator: r.Production, String: "CmdNumber", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Number", Int: 34}, &r.Rule{Operator: r.Identifier, String: "FutureNum", Int: 20}}}}}, &r.Rule{Operator: r.Production, String: "FutureNum", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newCommand(\"number\", popg(), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ":"}, &r.Rule{Operator: r.Token, String: "number"}, &r.Rule{Operator: r.Token, String: "("}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg([pop()]) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "Number", Int: 34}}}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ","}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(append(popg(), pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "Number", Int: 34}}}}}}}, &r.Rule{Operator: r.Token, String: ")"}}}}}, &r.Rule{Operator: r.Production, String: "LineCommand", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(buildLineCommand(pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Command", Int: 22}}}, &r.Rule{Operator: r.Token, String: ";"}}}, &r.Rule{Operator: r.Production, String: "Command", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newCommand(pop(), popg(), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ":"}, &r.Rule{Operator: r.Identifier, String: "CmdName", Int: 23}, &r.Rule{Operator: r.Token, String: "("}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg([pop()]) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "Token", Int: 25}, &r.Rule{Operator: r.Identifier, String: "Number", Int: 34}}}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ","}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " pushg(append(popg(), pop())) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Name", Int: 24}, &r.Rule{Operator: r.Identifier, String: "Token", Int: 25}, &r.Rule{Operator: r.Identifier, String: "Number", Int: 34}}}}}}}, &r.Rule{Operator: r.Token, String: ")"}}}}}, &r.Rule{Operator: r.Production, String: "CmdName", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(up.in) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Alphabet", Int: 29}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Nothing", Int: 35}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Alphabet", Int: 29}, &r.Rule{Operator: r.Identifier, String: "Digit", Int: 30}, &r.Rule{Operator: r.Token, String: "_"}}}}}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}}}}}, &r.Rule{Operator: r.Production, String: "Name", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newIdentifier(up.in, getNameIdx(up.in), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Alphabet", Int: 29}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Nothing", Int: 35}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Alphabet", Int: 29}, &r.Rule{Operator: r.Identifier, String: "Digit", Int: 30}, &r.Rule{Operator: r.Token, String: "_"}}}}}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}}}}}, &r.Rule{Operator: r.Production, String: "Token", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Dquotetoken", Int: 26}, &r.Rule{Operator: r.Identifier, String: "Squotetoken", Int: 27}, &r.Rule{Operator: r.Identifier, String: "Code", Int: 28}}}}}, &r.Rule{Operator: r.Production, String: "Dquotetoken", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "\""}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Nothing", Int: 35}}}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newToken(unescape(up.in), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "AsciiNoQs", Int: 31}, &r.Rule{Operator: r.Token, String: "'"}, &r.Rule{Operator: r.Token, String: "\\\""}}}}}}}, &r.Rule{Operator: r.Token, String: "\""}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}}}, &r.Rule{Operator: r.Production, String: "Squotetoken", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "'"}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Nothing", Int: 35}}}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newToken(unescape(up.in), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Identifier, String: "AsciiNoQs", Int: 31}, &r.Rule{Operator: r.Token, String: "\""}, &r.Rule{Operator: r.Token, String: "\\'"}}}}}}}, &r.Rule{Operator: r.Token, String: "'"}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}}}, &r.Rule{Operator: r.Production, String: "Code", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "~~"}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Nothing", Int: 35}}}, &r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newToken(unescapeTilde(up.in), c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Optional, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "~"}}}, &r.Rule{Operator: r.Identifier, String: "AllButTilde", Int: 33}}}}}, &r.Rule{Operator: r.Token, String: "~~"}, &r.Rule{Operator: r.Command, String: "skip", CodeChilds: &r.Rules{&r.Rule{Operator: r.Identifier, String: "Whitespace", Int: 36}}}}}, &r.Rule{Operator: r.Production, String: "Alphabet", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "a"}, &r.Rule{Operator: r.Token, String: "z"}}}, &r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "A"}, &r.Rule{Operator: r.Token, String: "Z"}}}}}}}, &r.Rule{Operator: r.Production, String: "Digit", Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "0"}, &r.Rule{Operator: r.Token, String: "9"}}}}}, &r.Rule{Operator: r.Production, String: "AsciiNoQs", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "("}, &r.Rule{Operator: r.Token, String: "~"}}}, &r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "#"}, &r.Rule{Operator: r.Token, String: "&"}}}, &r.Rule{Operator: r.Token, String: "\t"}, &r.Rule{Operator: r.Token, String: "\n"}, &r.Rule{Operator: r.Token, String: "\r"}, &r.Rule{Operator: r.Token, String: " "}, &r.Rule{Operator: r.Token, String: "!"}}}}}, &r.Rule{Operator: r.Production, String: "AsciiNoLb", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " "}, &r.Rule{Operator: r.Token, String: "~"}}}, &r.Rule{Operator: r.Token, String: "\t"}}}}}, &r.Rule{Operator: r.Production, String: "AllButTilde", Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "\x00"}, &r.Rule{Operator: r.Token, String: "}"}}}, &r.Rule{Operator: r.Token, String: "\\~"}, &r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "\u007f"}, &r.Rule{Operator: r.Token, String: "\uffff"}}}}}}}, &r.Rule{Operator: r.Production, String: "Number", Childs: &r.Rules{&r.Rule{Operator: r.Tag, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: " push(abnf.newNumber(up.in, c.Pos)) "}}, Childs: &r.Rules{&r.Rule{Operator: r.Or, Childs: &r.Rules{&r.Rule{Operator: r.Token, String: "0"}, &r.Rule{Operator: r.Sequence, Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "1"}, &r.Rule{Operator: r.Token, String: "9"}}}, &r.Rule{Operator: r.Repeat, Childs: &r.Rules{&r.Rule{Operator: r.Range, Int: 0, CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "0"}, &r.Rule{Operator: r.Token, String: "9"}}}}}}}}}}}}}, &r.Rule{Operator: r.Production, String: "Nothing", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: ""}}}, &r.Rule{Operator: r.Production, String: "Whitespace", Childs: &r.Rules{&r.Rule{Operator: r.Token, String: " \t\r\n"}}}, &r.Rule{Operator: r.Command, String: "startScript", CodeChilds: &r.Rules{&r.Rule{Operator: r.Token, String: "\n\nvar names = []\nfunction getNameIdx(name) {\n    var pos = names.indexOf(name)\n    if (pos != -1) {\n        return pos\n    }\n    return names.push(name)-1\n}\n\nfunction resolveNameIdx(productions) {\n\tfor (var i = 0; i < productions.length; i++) {\n        var rule = productions[i]\n\n        if (rule.Childs != undefined && rule.Childs.length > 0) {\n            resolveNameIdx(rule.Childs)\n        }\n\n        if (rule.CodeChilds != undefined && rule.CodeChilds.length > 0) {\n            resolveNameIdx(rule.CodeChilds)\n        }\n\n\t\tif (rule.Operator == abnf.oid.Production || rule.Operator == abnf.oid.Identifier) {\n\t\t\trule.Int = prodsPos[rule.Int]\n\t\t}\n\t}\n}\n\nvar prodsPos = {}\nvar lastPos = 0\nfunction buildProduction(prodName, prodTag, prodExpression) {\n    if (prodsPos[prodName.Int] != undefined) {\n        println(\"Error: Rule \" + prodName.String + \" is defined multiple times.\")\n        exit(0)\n    }\n    prodsPos[prodName.Int] = lastPos++\n    if (prodTag != undefined) {\n        prodTag.Childs = simplifyToArr(prodExpression)\n        return abnf.newProduction(prodName.String, prodName.Int, [prodTag], prodName.Pos)\n    } else {\n        return abnf.newProduction(prodName.String, prodName.Int, simplifyToArr(prodExpression), prodName.Pos)\n    }\n}\nfunction buildLineCommand(cmd) {\n    cmd.Int = getNameIdx(cmd.String)\n    prodsPos[cmd.Int] = lastPos++\n    return cmd\n}\n\n// This breaks up an abnf.oid.Group. Use only for childs of unbreakable rules.\nfunction simplifyArr(rules) {\n    if (rules.length == 1) {\n        var op = rules[0].Operator\n        if ( op == abnf.oid.Sequence || op == abnf.oid.Group || (op == abnf.oid.Or && rules[0].Childs.length <= 1) ) {\n            return simplifyArr(rules[0].Childs)\n        }\n    }\n    return rules\n}\n\n// This also breaks up an abnf.oid.Group. Use only for childs of unbreakable rules.\nfunction simplifyToArr(rule) {\n    return simplifyArr([rule])\n}\n\n// Groups with only one child can be broken apart as long as down there is an unbreakable rule. Try to find one.\nfunction trySimplifyDown(rule) {\n    if (rule.Childs == undefined) {\n        return rule\n    }\n    var op = rule.Operator\n    if (rule.Childs.length == 1) {\n        if (op == abnf.oid.Sequence || op == abnf.oid.Group || op == abnf.oid.Or) {\n            return trySimplifyDown(rule.Childs[0])\n        }\n    }\n    if (op == abnf.oid.Sequence) {\n        return undefined\n    } else {\n        return rule\n    }\n}\n\nfunction simplify(rule) {\n    var ruleDown = trySimplifyDown(rule)\n    if (ruleDown != undefined) {\n        return ruleDown\n    }\n    if (rule.Childs.length == 1) { // Breaking up abnf.oid.Group did not work. Getting down only with Sequence and Or.\n        var op = rule.Operator\n        if (op == abnf.oid.Sequence || op == abnf.oid.Or) {\n            return simplify(rule.Childs[0])\n        }\n    }\n    return rule\n}\n\nc.compile(c.asg)\nvar rules = ltr.stack\nresolveNameIdx(rules)\n\n// To show the initial a-grammar:\n// print(\"   => Rules: \"+abnf.serializeRules(rules)+\"\\n\\n\")\n\n// To return the generated a-grammar to the next parser:\nrules\n\n"}}}}
